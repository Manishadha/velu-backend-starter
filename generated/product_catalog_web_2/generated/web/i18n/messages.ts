export type Locale = string;

type Messages = {
  tag: string;
  title: string;
  subtitle: string;
  coreTitle: string;
  coreIntro: string;
  features: string[];
  pagesTitle: string;
  pagesIntro: string;
  pages: string[];
  techTitle: string;
  techIntro: string;
  techStack: string[];
  nextStepsIntro: string;
  nextSteps: string[];
  designNote: string;
};

const baseMessages: Messages = {
  tag: "global_dashboard • dashboard • Nextjs + Fastapi + Sqlite",
  title: "global_dashboard – Global_dashboard_v1",
  subtitle: "global_dashboard_v1",
  coreTitle: "Core features",
  coreIntro:
    "These are the main things this global_dashboard dashboard should do:",
  features: ["projects", "tasks", "team status", "KPIs", "admin panel"],
  pagesTitle: "Planned pages",
  pagesIntro:
    "Based on the Velu conversation, these pages are part of the plan:",
  pages: ["Home", "Projects", "Teams", "Reports", "Admin"],
  techTitle: "Tech & next steps",
  techIntro: "This project was generated by Velu with the following stack:",
  techStack: ["Frontend: Nextjs", "Backend: Fastapi", "Database: Sqlite"],
  nextStepsIntro: "Next actions:",
  nextSteps: [
    "Connect pages to real API endpoints and the database",
    "Implement business logic like cart, checkout, or dashboards",
    "Add authentication and roles for different users",
    "Iterate with Velu to generate the next version",
  ],
  designNote: "Design preference: dark mode.",
};

const localized: Record<string, Partial<Messages>> = {
  fr: {
    coreTitle: "Fonctionnalités clés",
    coreIntro:
      "Voici les principaux objectifs de ce tableau de bord global_dashboard :",
    features: [
      "projets",
      "tâches",
      "état des équipes",
      "indicateurs (KPIs)",
      "panneau d'administration",
    ],
    pagesTitle: "Pages prévues",
    pagesIntro:
      "D'après la conversation Velu, ces pages font partie du plan :",
    pages: ["Accueil", "Projets", "Équipes", "Rapports", "Admin"],
    techTitle: "Tech & prochaines étapes",
    techIntro: "Ce projet a été généré par Velu avec la pile suivante :",
    techStack: [
      "Frontend : Nextjs",
      "Backend : Fastapi",
      "Base de données : Sqlite",
    ],
    nextStepsIntro: "Prochaines actions :",
    nextSteps: [
      "Connecter les pages aux API réelles et à la base de données",
      "Implémenter la logique métier",
      "Ajouter l'authentification et les rôles",
      "Itérer avec Velu pour la prochaine version",
    ],
    designNote: "Préférence de design : mode sombre.",
  },
  nl: {
    coreTitle: "Belangrijkste functies",
    coreIntro:
      "Dit zijn de belangrijkste dingen die dit global_dashboard-dashboard moet doen:",
    features: ["projecten", "taken", "teamstatus", "KPI's", "adminpaneel"],
    pagesTitle: "Geplande pagina's",
    pagesIntro:
      "Op basis van het gesprek met Velu maken deze pagina's deel uit van het plan:",
    pages: ["Home", "Projecten", "Teams", "Rapporten", "Admin"],
    nextStepsIntro: "Volgende acties:",
    designNote: "Designvoorkeur: dark mode.",
  },
};

export const defaultLocale: Locale = "en";

export function getMessages(locale: Locale): Messages {
  const overrides = localized[locale] ?? {};
  return { ...baseMessages, ...overrides };
}

export function computeSupportedLocales(requested: Locale[]): Locale[] {
  const base = [defaultLocale];
  const extra = requested.filter(Boolean);
  const merged = [...base, ...extra];
  const seen = new Set<string>();
  const result: Locale[] = [];
  for (const l of merged) {
    if (!seen.has(l)) {
      seen.add(l);
      result.push(l);
    }
  }
  return result;
}
